<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Command-line interface for Laminas projects"> 

    
    
    <meta name="docsearch:version" content="latest">
    <meta name="docsearch:language" content="en">
    <meta name="docsearch:component" content="laminas-cli">

    <link rel="canonical" href="https://docs.laminas.dev/laminas-cli/command-chains/">
    <link rel="shortcut icon" href="https://docs.laminas.dev/img/trademark-laminas-foundation-rgb.svg">

    <title>Command Chains - laminas-cli - Laminas Docs</title>

    <link rel="stylesheet" href="https://docs.laminas.dev/css/styles.css">
    
</head>
<body id="page-top" class="components" data-spy="scroll" data-target=".toc" data-offset="20">

    
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        
        <a class="logo-link navbar-brand" href="https://getlaminas.org/" data-tooltip data-placement="bottom" title="Go to the Laminas homepage">
            <img src="https://docs.laminas.dev/img/laminas-foundation-white.svg" height="28" alt="Laminas">
        </a>
        <a class="navbar-title" href="https://docs.laminas.dev/" data-tooltip data-placement="bottom" title="Go to the Laminas Documentation">
            Documentation
        </a>

        
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <div class="dropdown sub-project-selector">
                        <a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false">
                            All Docs
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a href="https://docs.mezzio.dev/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mezzio-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Mezzio</strong><br>
                                        PSR-15 Middleware in Minutes
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/components/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-components-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Components</strong><br>
                                        Components for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/mvc" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mvc-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>MVC</strong><br>
                                        MVC for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <a href="https://api-tools.getlaminas.org/documentation" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-api-tools-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>API Tools</strong><br>
                                        Build RESTful APIs in Minutes
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/migration/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Migration to Laminas
                                    </div>
                                </div>
                            </a>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/tutorials/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Tutorials
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="https://getlaminas.org/participate" class="nav-link">Community</a>
                </li>
            </ul>

            
            
                <div class="d-block d-sm-none">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">laminas-cli</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item subnavigation__list-item--active">
                                <a href="./" class="subnavigation__link">Command Chains</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../command-params/" class="subnavigation__link">Command Params</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../autocompletion/" class="subnavigation__link">Autocompletion</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../events/" class="subnavigation__link">Events</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../faq/" class="subnavigation__link">FAQ</a>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="d-block d-sm-none">
                <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</nav>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-8">
                <h1 class="header__title">
                    Components

                    
                        <small class="header__subtitle">laminas-cli</small>
                    
                </h1>
            </div>

            
            <div class="col-4 text-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/laminas/laminas-cli" class="header__link header__link--github" title="Go to repository of laminas-cli">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-sm-12 content" role="main">
                
                
                    
    

    
    
        <div class="toc">
            <h6 class="toc__headline">On this page</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#chain-configuration" class="toc__link nav-link">Chain configuration</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#inputmapperinterface" class="toc__link nav-link">InputMapperInterface</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#example" class="toc__link nav-link">Example</a>
                    </li>
                
            </ul>
        </div>
    

                

                
                    <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/">Overview</a></li>
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/components/">Components</a></li>

            
                <li class="breadcrumb-item"><a href="..">laminas-cli</a></li>

                

                <li class="breadcrumb-item active" aria-current="page">Command Chains</li>
            
        
    </ol>
</nav>






    
    

    <h1 id="command-chains">Command chains</h1>
<p>Sometimes you may want to execute another command straight after the successful
completion of another command. As an example, consider the following two
command classes:</p>
<pre class="highlight"><code class="language-php">namespace MyApp\Command;

use Symfony\Component\Console\Command\Command;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Output\OutputInterface;

class FirstCommand extends Command
{
    /** @var string */
    protected static $defaultName = 'first-command';

    protected function configure() : void
    {
        $this-&gt;setName(self::$defaultName);
        $this-&gt;addOption('name', null, InputOption::VALUE_REQUIRED, 'Module name');
    }

    protected function execute(InputInterface $input, OutputInterface $output) : int
    {
        $output-&gt;writeln('First command: ' . $input-&gt;getOption('name'));

        return 0;
    }
}</code></pre>
<pre class="highlight"><code class="language-php">namespace MyApp\Command;

use Symfony\Component\Console\Command\Command;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Output\OutputInterface;

class SecondCommand extends Command
{
    /** @var string */
    protected static $defaultName = 'second-command';

    protected function configure() : void
    {
        $this-&gt;setName(self::$defaultName);
        $this-&gt;addOption('module', null, InputOption::VALUE_REQUIRED, 'Module name');
    }

    protected function execute(InputInterface $input, OutputInterface $output) : int
    {
        $output-&gt;writeln('Second command: ' . $input-&gt;getOption('module'));

        return 0;
    }
}</code></pre>
<p>We can expose each to laminas-cli, and also create a <em>chain</em>, whereby when the
first command finishes execution, it will then invoke the second:</p>
<pre class="highlight"><code class="language-php">namespace MyApp\Command;

return [
    'laminas-cli' =&gt; [
        'commands' =&gt; [
            'first-command'  =&gt; Command\FirstCommand::class,
            'second-command' =&gt; Command\SecondCommand::class,
        ],
        'chains' =&gt; [
            Command\FirstCommand::class =&gt; [
                Command\SecondCommand::class =&gt; ['--name' =&gt; '--module'],
            ],
        ],
    ],
];</code></pre>
<!-- markdownlint-disable-next-line MD001 -->
<blockquote>
<h3 id="chains-configuration-options">"chains" configuration options</h3>
<p>We discuss <a href="#chain-configuration">chain configuration in more detail below</a>.</p>
</blockquote>
<p>Running <code>./vendor/bin/laminas first-command</code> will result with:</p>
<pre class="highlight"><code class="language-console">$ ./vendor/bin/laminas first-command --name=Foo
First command: Foo

Executing second-command. Do you want to continue?
  [Y] yes, continue
  [s] skip this command,
  [n] no, break

&gt; yes, continue

Second command: Foo</code></pre>
<p>Please note that only successful result of the first command will trigger the
second command.  The final result (exit code) of the chained commands will be
the result of the last executed command. If a command in the middle of the chain
results in a failure status, execution will halt with that command, and its
status will be returned.</p>
<h2 id="chain-configuration">Chain configuration</h2>
<p>Chain configuration is under the "chains" section of the "laminas-cli"
configuration:</p>
<pre class="highlight"><code class="language-php">&lt;?php
return [
    'laminas-cli' =&gt; [
        'chains' =&gt; [ /* . . . */ ],
    ],
];</code></pre>
<p>The configuration is expected to be an associative array mapping command names
you have previously defined in the "commands" section of the "laminas-cli"
configuration, and the value is an associative array:</p>
<pre class="highlight"><code class="language-php">'chains' =&gt; [
    COMMAND_CLASS_NAME =&gt; CHAINED_COMMANDS
],</code></pre>
<p>The chained commands (<code>CHAINED_COMMANDS</code>) are themselves an associative array,
where the key is the name of a command you have already defined in the
"commands" section of the "laminas-cli" configuration, and the value is an
associative array:</p>
<pre class="highlight"><code class="language-php">'chains' =&gt; [
    COMMAND_CLASS_NAME =&gt; [
        CHAINED_COMMAND_CLASS_NAME =&gt; INPUT_MAPPER,
    ],
],</code></pre>
<p>An input mapper (<code>INPUT_MAPPER</code>) can be one of two things:</p>
<ul>
<li>a string class name of an implemention of <code>Laminas\Cli\Input\Mapper\InputMapperInterface</code></li>
<li>an array specification</li>
</ul>
<p>Most commonly, you will use an array specification. In this case, items can take
two forms:</p>
<ul>
<li>a key/value pair, where the key is the option or argument from the previous
  command, and the value is the option or argument by which to provide the value
  to the chained command.</li>
<li>an array, with a single key/value pair of the option or argument name on the
  chained command, and the value to use with it.</li>
</ul>
<p>As a visualization:</p>
<pre class="highlight"><code class="language-php">'chains' =&gt; [
    COMMAND_CLASS_NAME =&gt; [
        'argument-on-previous-command' =&gt; 'argument-on-this-command',
        '--option-on-previous-command' =&gt; '--option-on-this-command',
        ['an-argument-on-this-command' =&gt; 'argument value to supply'],
        ['--an-option-on-this-command' =&gt; 'option value to supply'],
    ],
],</code></pre>
<p>When specifying options, the <code>--</code> prefix should be used with the option names,
just like you'd invoke them from the command line if you were to call the
command by itself.</p>
<h3 id="chain-command-input-mapper-example">Chain command input mapper example</h3>
<p>If we return to the original example from the first section of this page:</p>
<pre class="highlight"><code class="language-php">namespace MyApp\Command;

return [
    'laminas-cli' =&gt; [
        'commands' =&gt; [
            'first-command'  =&gt; Command\FirstCommand::class,
            'second-command' =&gt; Command\SecondCommand::class,
        ],
        'chains' =&gt; [
            Command\FirstCommand::class =&gt; [
                Command\SecondCommand::class =&gt; ['--name' =&gt; '--module'],
            ],
        ],
    ],
];</code></pre>
<p>We have defined two commands, <code>FirstCommand</code> and <code>SecondCommand</code>. <code>FirstCommand</code>
defines the option <code>--name</code>, while <code>SecondCommand</code> defines the option
<code>--module</code>. In the above configuration, we indicate that when we call
<code>FirstCommand</code>, we want to start a command chain that also invokes
<code>SecondCommand</code>. When it does so, it should take the value provided via the
<code>--name</code> option and pass that value to the <code>SecondCommand</code> <code>--module</code> option. In
effect, that would be similar to calling the following commands in sequence:</p>
<pre class="highlight"><code class="language-bash">$ ./vendor/bin/laminas first-command --name Foo
$ ./vendor/bin/laminas second-command --module Foo</code></pre>
<p>Since <code>FirstCommand</code> now provides a chain, we can call:</p>
<pre class="highlight"><code class="language-bash">$ ./vendor/bin/laminas first-command --name Foo</code></pre>
<p>and <code>Foo</code> will be passed for the <code>--module</code> option when <code>SecondCommand</code> is
invoked as part of the chain.</p>
<h2 id="inputmapperinterface">InputMapperInterface</h2>
<p>As noted in the previous section, you can provide a string class name of a
<code>Laminas\Cli\Input\Mapper\InputMapperInterface</code> implementation to use in order
to map arguments and options from one command to another. That interface defines
one method:</p>
<pre class="highlight"><code class="language-php">namespace Laminas\Cli\Input\Mapper;

use Symfony\Component\Console\Input\InputInterface;

interface InputMapperInterface
{
    public function __invoke(InputInterface $input): array;
}</code></pre>
<p>The return value should be an associative array mapping arguments and options to
the values they contain, suitable for use with
<code>Symfony\Component\Console\Input\ArrayInput</code> (<a href="https://symfony.com/doc/current/console/calling_commands.html">see symfony/console documentation
for details</a>);</p>
<h2 id="example">Example</h2>
<p>The initial section of this page</p>
<pre class="highlight"><code class="language-php">[
   'name'   =&gt; 'module', // adds "module" argument to the next command call with the value of "name" argument from the previous command
   '--mode' =&gt; '--type', // adds "--type" option to the next command call with the value of "--mode" option from the previous command
   ['additional-arg'   =&gt; 'arg-value'], // adds "additional-arg" argument to the next command call with the value "arg-value"
   ['--additional-opt' =&gt; 'opt-value'], // adds "--additional-opt" option to the next command call with the value "opt-value"
],</code></pre>
<p>It is also possible to provide class name (string) which implements <code>Laminas\Cli\Input\Mapper\InputMapperInterface</code>
if you need more customised mapper between input of the previous and next command.</p>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../intro/">
                    <small class="page-nav__label">Previous</small>
                    <i class="fa fa-chevron-left"></i>
                    Introduction
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
                <a rel="next" class="page-nav__link page-nav__link--next" href="../command-params/">
                    <small class="page-nav__label">Next</small>
                    Command Params
                    <i class="fa fa-chevron-right"></i>
                </a>
            
        </li>
    </ul>
</nav>



                
            </div>
            <div class="col-md-3 col-sm-12 sidebar">
                <div class="donation-banner">
    <a href="https://getlaminas.org/support/">
        <h2>Donate</h2>
        <p>Support Laminas Developers Directly</p>
        <img src="https://funding.communitybridge.org/assets/cb-f-horizontal-white.svg">
    </a>
</div>

                
                    <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">laminas-cli</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item subnavigation__list-item--active">
                                <a href="./" class="subnavigation__link">Command Chains</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../command-params/" class="subnavigation__link">Command Params</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../autocompletion/" class="subnavigation__link">Autocompletion</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../events/" class="subnavigation__link">Events</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../faq/" class="subnavigation__link">FAQ</a>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                    
                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h5>Laminas</h5>
                <ul>
                    <li>Laminas Project <a href="https://getlaminas.org/">The new foundation for the community-supported, open source continuation of Zend Framework</a></li>
                    <li>Laminas Components and MVC <a href="https://docs.laminas.dev/">Components and MVC for enterprise applications</a></li>
                    <li>Mezzio <a href="https://docs.mezzio.dev/">PSR-15 middleware in minutes</a></li>
                    <li>Laminas API Tools <a href="https://api-tools.getlaminas.org/">Build RESTful APIs in minutes</a></li>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="row">

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Support</h4>
                        <ul class="support__list">
                            <li class="support__list-item">
                                <a href="https://discourse.laminas.dev" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://laminas.dev/chat" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://github.com/laminas" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://twitter.com/getlaminas" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/blog/rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                            </li>
                        </ul>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">License</h4>
                        <p>
                            Code licensed under <a
                                href="https://github.com/laminas/laminas-cli/blob/-/LICENSE.md">BSD 3-Clause</a>.
                        </p>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Copyright</h4>
                        <p>
                            <!--Built with love by the Laminas team with the help of our
                            <a href="https://github.com/laminas/laminas-cli/graphs/contributors">contributors</a>.<br>-->
                            &copy; 2022 <a href="https://getlaminas.org/">Laminas Project</a> a Series of LF Projects, LLC.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

    <script>
        let base_url = '..',
            project  = "components",
            siteName = 'laminas-cli';
    </script>
    <script src="https://docs.laminas.dev/js/scripts.js"></script>
    
        <script src="../search/main.js"></script>
    

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Search</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search in laminas-cli" id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
        </div>
    </div>
</div>
</body>


</html>
